{% extends 'Base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/room_detail.css' %}">

<div class="room-container">
      <div class="room-image">
        <img src="{{ room.image.url }}" alt="{{ room.title }}">
      </div>

      <div class="room-details">
        <h1 class="room-title">{{ room.title }}</h1>
        <p class="uploaded-by">Uploaded by: {{ room.uploaded_by }}</p>
        <p class="room-description">{{ room.desc }}</p>

        <div class="room-actions">
            <!--Creator side-->
          {% if room.uploaded_by == request.user %}
            {% if not request.GET.showform %}
            <form method="get">
                <input type="hidden" name="showform" value="1">
                <button class="join-btn">Manage</button>
            </form>
            {% else %}
            <form method="post" action="{% url 'RoomPage' room.id %}" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="file" name="img" >
                <input type="file" name="vid" >
                <input type="file" name="mus" >
                <button class="join-btn">upload</button>
            </form>
            {% endif %}

            <!--User side-->
            {% else %}
            <button class="join-btn">Join</button>
            {% endif %}
        </div>


          {% if cont %}
          <div class="room-contents">
            <div class="room-imgs">
                {% for content in cont %}
                    {% if content.img %}
                        <img src="{{ content.img.url }}">
                    {% endif %}
                {% endfor %}
            </div>

              <div class="room-musics">
                {% for content in cont %}
                    {% if content.mus %}
                        <audio controls>
                            <source src="{{ content.mus.url }}" type="audio/mpeg">
                             Your browser does not support the audio element.
                        </audio>
                    {% endif %}
                {% endfor %}
            </div>

              <div class="room-videos">
                {% for content in cont %}
                    {% if content.vid %}
                        <video width="320" height="240" controls>
                            <source src="{{ content.vid.url }}" type="video/mp4">
                        </video>
                    {% endif %}
                {% endfor %}
            </div>
          </div>
          {% endif %}

      </div>
</div>
{% endblock %}
